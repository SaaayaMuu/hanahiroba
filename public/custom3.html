<body>

 <div class="form-group">
    <div class="field">
       <%= f.label :images, "写真" %><span class="must">*</span>
    </div>
    <p>[5MBまで、最大アップロード枚数5枚]</p>
    <%= f.file_field :images, class: "push", multiple: true, onchange: "loadImage(this);" %>
  </div>

  <div id="post_images" style="display: none;">
    <p id="preview"></p>
  </div>


</body>
<script>
  function loadImage(obj)
  {
    var allPreview = document.getElementById('post_images');
    var newPreview = document.createElement("p");
    allPreview.querySelector("p").remove();
    newPreview.setAttribute("id","preview");
    allPreview.insertBefore(newPreview, allPreview.firstChild);
    document.getElementById("post_images").style.display = "";
    for (i = 0; i < obj.files.length; i++) {
        var fileReader = new FileReader();
        fileReader.onload = (function (e) {
            var img = new Image();
            img.src = e.target.result;
            document.getElementById('preview').appendChild(img);
        });
      fileReader.readAsDataURL(obj.files[i]);
    }
  }
</script>